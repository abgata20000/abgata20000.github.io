<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: AngularJS | AB Lab]]></title>
  <link href="http://blog.abgata.org/blog/categories/angularjs/atom.xml" rel="self"/>
  <link href="http://blog.abgata.org/"/>
  <updated>2014-05-01T16:57:49+09:00</updated>
  <id>http://blog.abgata.org/</id>
  <author>
    <name><![CDATA[abgata20000]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[AngularJSの注意点]]></title>
    <link href="http://blog.abgata.org/blog/2014/02/03/angularjs_careful/"/>
    <updated>2014-02-03T04:48:00+09:00</updated>
    <id>http://blog.abgata.org/blog/2014/02/03/angularjs_careful</id>
    <content type="html"><![CDATA[<h3>参考サイト</h3>

<p>&ndash;</p>

<h2>POSTでパラメータを送信する際は、設定が必要</h2>

<p>```</p>

<pre><code>@testApp.config ($httpProvider) -&gt;
    $httpProvider.defaults.transformRequest = (data = {}) -&gt;
        $.param(data);
    $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8'

 @
</code></pre>

<p>```
 そのままPOST送信するとパラメータがJSON文字列？で送信されるらしく、</p>

<p> うまくデータを送れないので通常のForm送信の方式に合わせる必要がある</p>

<p> ただ、 <strong>rails</strong> で <strong>angularjs-rails-resource</strong> を使っていると大丈夫な模様</p>

<h2>$resourceでPOST or PUT する際のURLパラメータの渡し方。</h2>

<p>```</p>

<pre><code>url = '/api/action/:id'

model = $resource url, null ,
    get: {method: 'GET', isArray: false}
    post: {method: 'POST', isArray: false, params: {id: "@id"}
    put: {method: 'PUT', isArray: false, params: {id: "@id"}}
    delete: {method: 'DELETE', isArray: false}

param =
    id: 1
    name: 'myName'

model.put param, (res, e) -&gt;
        console.log res
</code></pre>

<p>```</p>

<p>GET と DELETE は そのままで <strong>param</strong> の <strong>id</strong> が <strong>action/:id</strong>
に反映されるが、
PUT と POST の場合は、モデルのメソッド作成の際に指定しておく必要がある模様</p>

<p>```</p>

<pre><code>model = $resource url, {id: "@id"} ,
    get: {method: 'GET', isArray: false}
    post: {method: 'POST', isArray: false}
    put: {method: 'PUT', isArray: false}
    delete: {method: 'DELETE', isArray: false}
</code></pre>

<p>```</p>

<p>これでも大丈夫そう。</p>
]]></content>
  </entry>
  
</feed>
